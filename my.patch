diff -Naur minidlna-1.0.25/Makefile minidlna-mod/Makefile
--- minidlna-1.0.25/Makefile	2012-01-17 16:49:01.000000000 -0600
+++ minidlna-mod/Makefile	2012-11-18 16:52:08.000000000 -0600
@@ -10,12 +10,12 @@
 # or :
 # $ make install
 #
-#CFLAGS = -Wall -O -D_GNU_SOURCE -g -DDEBUG
+CFLAGS = -Wall -O -D_GNU_SOURCE -g -DDEBUG 
 #CFLAGS = -Wall -g -Os -D_GNU_SOURCE
-CFLAGS = -Wall -g -O3 -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 \
-	 -I/usr/include/ffmpeg \
-	 -I/usr/include/libavutil -I/usr/include/libavcodec -I/usr/include/libavformat \
-	 -I/usr/include/ffmpeg/libavutil -I/usr/include/ffmpeg/libavcodec -I/usr/include/ffmpeg/libavformat
+#CFLAGS = -Wall -g -D_GNU_SOURCE  \
+#	 -I/usr/include/sys -I/usr/include/ffmpeg \
+#	 -I/usr/include/libavutil -I/usr/include/libavcodec -I/usr/include/libavformat \
+#	 -I/usr/include/ffmpeg/libavutil -I/usr/include/ffmpeg/libavcodec -I/usr/include/ffmpeg/libavformat
 #STATIC_LINKING: CFLAGS += -DSTATIC
 #STATIC_LINKING: LDFLAGS = -static
 CC = gcc
@@ -45,7 +45,6 @@
 EXECUTABLES = minidlna testupnpdescgen
 
 .PHONY:	all clean distclean install depend
-
 all:	$(EXECUTABLES)
 
 clean:
diff -Naur minidlna-1.0.25/config.h minidlna-mod/config.h
--- minidlna-1.0.25/config.h	1969-12-31 18:00:00.000000000 -0600
+++ minidlna-mod/config.h	2012-11-18 16:22:37.000000000 -0600
@@ -0,0 +1,40 @@
+/* MiniDLNA Project
+ * http://sourceforge.net/projects/minidlna/
+ * (c) 2008-2009 Justin Maggard
+ * generated by ./genconfig.sh on Sun Nov 18 16:22:37 CST 2012 */
+#ifndef __CONFIG_H__
+#define __CONFIG_H__
+
+#define OS_NAME			"Linux"
+#define OS_VERSION		"Linux/2.6.39.2"
+#define OS_URL			"http://www.kernel.org/"
+
+/* full path of the file database */
+#define DEFAULT_DB_PATH		"/tmp/minidlna"
+
+/* full path of the log directory */
+#define DEFAULT_LOG_PATH	"/tmp/minidlna"
+
+/* Comment the following line to use home made daemonize() func instead
+ * of BSD daemon() */
+#define USE_DAEMON
+
+/* Enable if the system inotify.h exists.  Otherwise our own inotify.h will be used. */
+#define HAVE_INOTIFY_H
+
+/* Enable if the system iconv.h exists.  ID3 tag reading in various character sets will not work properly otherwise. */
+#define HAVE_ICONV_H
+
+/* Enable if the system libintl.h exists for NLS support. */
+#define ENABLE_NLS
+
+/* Enable NETGEAR-specific tweaks. */
+/*#define NETGEAR*/
+/* Enable ReadyNAS-specific tweaks. */
+/*#define READYNAS*/
+/* Compile in TiVo support. */
+/*#define TIVO_SUPPORT*/
+/* Enable PnPX support. */
+#define PNPX 0
+
+#endif
diff -Naur minidlna-1.0.25/metadata.c minidlna-mod/metadata.c
--- minidlna-1.0.25/metadata.c	2012-06-29 16:11:29.000000000 -0500
+++ minidlna-mod/metadata.c	2012-11-18 16:53:31.000000000 -0600
@@ -30,9 +30,9 @@
 #include "image_utils.h"
 #include <jpeglib.h>
 #include <setjmp.h>
-#include <avutil.h>
-#include <avcodec.h>
-#include <avformat.h>
+#include <libavutil/avutil.h>
+#include <libavcodec/avcodec.h>
+#include <libavformat/avformat.h>
 #include "tagutils/tagutils.h"
 
 #include "upnpglobalvars.h"
diff -Naur minidlna-1.0.25/minidlna.c minidlna-mod/minidlna.c
--- minidlna-1.0.25/minidlna.c	2012-05-07 19:10:42.000000000 -0500
+++ minidlna-mod/minidlna.c	2012-11-18 16:51:00.000000000 -0600
@@ -46,6 +46,7 @@
  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  * POSSIBILITY OF SUCH DAMAGE.
  */
+#include <sys/time.h>
 #include <stdlib.h>
 #include <unistd.h>
 #include <string.h>
diff -Naur minidlna-1.0.25/minidlnatypes.h minidlna-mod/minidlnatypes.h
--- minidlna-1.0.25/minidlnatypes.h	2012-05-31 13:37:39.000000000 -0500
+++ minidlna-mod/minidlnatypes.h	2012-11-18 16:49:14.000000000 -0600
@@ -29,6 +29,7 @@
 #ifndef __MINIDLNATYPES_H__
 #define __MINIDLNATYPES_H__
 
+#include <time.h>
 #include "config.h"
 #include <netinet/in.h>
 
diff -Naur minidlna-1.0.25/tagutils/tagutils-plist.c minidlna-mod/tagutils/tagutils-plist.c
--- minidlna-1.0.25/tagutils/tagutils-plist.c	2012-01-17 16:54:47.000000000 -0600
+++ minidlna-mod/tagutils/tagutils-plist.c	2012-11-18 16:54:43.000000000 -0600
@@ -27,7 +27,6 @@
 #include "misc.h"
 #include "tagutils.h"
 #include "textutils.h"
-#include "log.h"
 
 
 #define MAX_BUF 4096
